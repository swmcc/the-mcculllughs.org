<%
  # Calculate grid - aim for ~60px thumbnails
  total_cells = 200
  photo_count = @public_photos.size
  empty_count = [total_cells - photo_count, 0].max
%>

<div class="fixed inset-0 grid grid-cols-8 sm:grid-cols-10 md:grid-cols-12 lg:grid-cols-[repeat(16,minmax(0,1fr))] xl:grid-cols-[repeat(20,minmax(0,1fr))] auto-rows-fr">
  <% @public_photos.each do |photo| %>
    <%= link_to public_photo_path(photo.short_code), class: "block overflow-hidden hover:opacity-80 transition-opacity" do %>
      <%= image_tag url_for(photo.file.variant(resize_to_fill: [80, 80])),
          class: "w-full h-full object-cover",
          loading: "lazy" %>
    <% end %>
  <% end %>

  <% empty_count.times do %>
    <div class="bg-neutral-100"></div>
  <% end %>
</div>

<!-- Centered overlay with title and login -->
<div class="fixed inset-0 flex items-center justify-center pointer-events-none">
  <div class="text-center pointer-events-auto">
    <h1 class="text-4xl sm:text-5xl font-bold text-neutral-800 mb-2 drop-shadow-sm">The McCulloughs</h1>
    <p class="text-neutral-500 mb-6">Family photos</p>
    <%= link_to "Sign In", new_user_session_path,
        class: "inline-block px-6 py-2 bg-neutral-900 hover:bg-neutral-800 text-white text-sm font-medium rounded-lg transition-colors shadow-lg" %>
  </div>
</div>
